# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [13.1.0]

### Uncategorized

- release: dedupe, update LavaMoat policies, update attributions
- updated changelog and generated feature test plan
- bump semvar version to 13.1.0
- Merge origin/main into master-sync
- Merge origin/main into master-sync
- bump semvar version to 13.1.0
- build(webpack): silence swc sourcemap messages on Windows ([#34777](https://github.com/MetaMask/metamask-extension/pull/34777))
- test: Fix test failure when WebDriver is inactive before shutdown ([#34748](https://github.com/MetaMask/metamask-extension/pull/34748))
- test(e2e): Add E2E test for `snap_trackEvent` ([#34764](https://github.com/MetaMask/metamask-extension/pull/34764))
- chore: bump institutional snap to 1.3.2 cp-13.0.0 ([#34761](https://github.com/MetaMask/metamask-extension/pull/34761))
- perf: More bundle size reductions ([#34694](https://github.com/MetaMask/metamask-extension/pull/34694))
- chore: add CODEOWNERS for QA Team - E2E Framework ([#34719](https://github.com/MetaMask/metamask-extension/pull/34719))
- test: Fixed the test aggregated balance ([#34629](https://github.com/MetaMask/metamask-extension/pull/34629))
- chore: Remove remote mode ([#34041](https://github.com/MetaMask/metamask-extension/pull/34041))
- style: tell VSCode to end all files with a newline ([#34673](https://github.com/MetaMask/metamask-extension/pull/34673))
- ci(gh-actions): unify version release workflows ([#33555](https://github.com/MetaMask/metamask-extension/pull/33555))
- release: master sync 12.23.1 ([#34729](https://github.com/MetaMask/metamask-extension/pull/34729))
- Merge origin/main into master-sync
- chore: bump multichain-accounts deps ([#34631](https://github.com/MetaMask/metamask-extension/pull/34631))
- chore: update sei new logo ([#34634](https://github.com/MetaMask/metamask-extension/pull/34634))
- fix(33176): remove ledger transport initialization at login and vault creation ([#34574](https://github.com/MetaMask/metamask-extension/pull/34574))
- ci: cache the anvil binary ([#34703](https://github.com/MetaMask/metamask-extension/pull/34703))
- chore: Revert "feat: 2.11 added sentry error UI cp-13.0.0" ([#34699](https://github.com/MetaMask/metamask-extension/pull/34699))
- test(e2e): Add E2E test for `snap_startTrace` and `snap_endTrace` ([#34666](https://github.com/MetaMask/metamask-extension/pull/34666))
- perf: Reduce contentscript size ([#34688](https://github.com/MetaMask/metamask-extension/pull/34688))
- chore: Rename extension minimum version flag cp-12.23.1 ([#34636](https://github.com/MetaMask/metamask-extension/pull/34636))
- release: Master sync to main ([#34669](https://github.com/MetaMask/metamask-extension/pull/34669))
- Merge origin/main into master-sync
- chore: Remove obsolete MMI policy ([#34626](https://github.com/MetaMask/metamask-extension/pull/34626))
- test: Fix bugs in token-util tests ([#34635](https://github.com/MetaMask/metamask-extension/pull/34635))
- ci(gh-action): add gh action to keep stable branch sync ([#33026](https://github.com/MetaMask/metamask-extension/pull/33026))
- chore: Update CODEOWNERS from `snaps-devs` to `core-platform` ([#34659](https://github.com/MetaMask/metamask-extension/pull/34659))
- chore(e2e): Add E2E test for `snap_trackError` ([#34075](https://github.com/MetaMask/metamask-extension/pull/34075))
- fix(snaps): Add localized name to `AccountSelector` ([#34657](https://github.com/MetaMask/metamask-extension/pull/34657))
- chore: fix hex color violations and enable color-no-hex rules ([#34604](https://github.com/MetaMask/metamask-extension/pull/34604))
- chore: fix toggle spacing ([#34536](https://github.com/MetaMask/metamask-extension/pull/34536))
- ci: update e2e image org ([#34572](https://github.com/MetaMask/metamask-extension/pull/34572))
- chore: update discover link to token explore page ([#34580](https://github.com/MetaMask/metamask-extension/pull/34580))
- build(webpack): support commonjs style `exports.something = value` syntax ([#34378](https://github.com/MetaMask/metamask-extension/pull/34378))
- chore: bump accounts dependencies ([#34570](https://github.com/MetaMask/metamask-extension/pull/34570))
- chore: adds util for calculating amt in bridge mapping ([#34575](https://github.com/MetaMask/metamask-extension/pull/34575))
- chore: adding tailwind docs ([#34489](https://github.com/MetaMask/metamask-extension/pull/34489))
- chore(accounts): bump `eth-snap-keyring` to support generic accounts ([#34547](https://github.com/MetaMask/metamask-extension/pull/34547))
- chore: Bump Snaps packages ([#34504](https://github.com/MetaMask/metamask-extension/pull/34504))
- bump: multichain network controller ([#34286](https://github.com/MetaMask/metamask-extension/pull/34286))
- chore: adding tailwind eslint plugin ([#34211](https://github.com/MetaMask/metamask-extension/pull/34211))
- chore: bump bridge-controller to 36.1.0 and bridge-status-controller to 36.0.0 ([#34341](https://github.com/MetaMask/metamask-extension/pull/34341))
- chore: Improve performance of address formatting/validation ([#34152](https://github.com/MetaMask/metamask-extension/pull/34152))
- chore: Add buttons to test error capture ([#34386](https://github.com/MetaMask/metamask-extension/pull/34386))
- chore: Update `form-data` to address advisory ([#34480](https://github.com/MetaMask/metamask-extension/pull/34480))
- test: add wallet details e2e tests ([#34276](https://github.com/MetaMask/metamask-extension/pull/34276))
- chore: upgrade @metamask/design-tokens to v8.1.0 ([#34384](https://github.com/MetaMask/metamask-extension/pull/34384))
- chore: change the message in the script that initializes master sync ([#34370](https://github.com/MetaMask/metamask-extension/pull/34370))

### Added

- feat: do passwordOutdatedCheck in change-password page render ([#34757](https://github.com/MetaMask/metamask-extension/pull/34757))
- feat: solana websockets ([#34620](https://github.com/MetaMask/metamask-extension/pull/34620))
- feat: enable notifications by default for users ([#34693](https://github.com/MetaMask/metamask-extension/pull/34693))
- feat: show additional startup errors to users ([#34305](https://github.com/MetaMask/metamask-extension/pull/34305))
- feat: trezor web connect library upgrade. ([#33834](https://github.com/MetaMask/metamask-extension/pull/33834))
- feat: update seedless controller cp-13.0.0 ([#34632](https://github.com/MetaMask/metamask-extension/pull/34632))
- feat: seedless-onboarding prod builds for release branch cp-13.0.0 ([#34602](https://github.com/MetaMask/metamask-extension/pull/34602))
- feat: 2.11 added sentry error UI cp-13.0.0 ([#34208](https://github.com/MetaMask/metamask-extension/pull/34208))
- feat: Add multichain account cell component ([#34482](https://github.com/MetaMask/metamask-extension/pull/34482))
- feat: add `multichain-accounts-service` initialization ([#34178](https://github.com/MetaMask/metamask-extension/pull/34178))
- feat: configure enforced simulations slippage ([#33924](https://github.com/MetaMask/metamask-extension/pull/33924))
- feat: add MultichainAddressRowsList component ([#34405](https://github.com/MetaMask/metamask-extension/pull/34405))
- feat: Add Ocap Kernel Panel as a devtools page ([#34029](https://github.com/MetaMask/metamask-extension/pull/34029))
- feat: 2.12 Session Expiry modal cp-13.0.0 ([#34118](https://github.com/MetaMask/metamask-extension/pull/34118))
- feat: Onboarding Unlock page update cp-13.0.0 ([#34505](https://github.com/MetaMask/metamask-extension/pull/34505))
- feat: enable SeedlessOnboarding feature cp-13.0.0 ([#34429](https://github.com/MetaMask/metamask-extension/pull/34429))
- feat: enabled websocket for Solana e2e ([#34250](https://github.com/MetaMask/metamask-extension/pull/34250))
- feat: support swap deep links cp-13.0.0 ([#34259](https://github.com/MetaMask/metamask-extension/pull/34259))

### Fixed

- fix: adds fromChain to the usecrosschainswaps event tracker hook ([#34686](https://github.com/MetaMask/metamask-extension/pull/34686))
- fix: hides bridge button on testnet for unified ui ([#34700](https://github.com/MetaMask/metamask-extension/pull/34700))
- fix: account list order (multichain accounts state 1 temporary fix) ([#34756](https://github.com/MetaMask/metamask-extension/pull/34756))
- fix: additional network permission request view shows all networks ([#34651](https://github.com/MetaMask/metamask-extension/pull/34651))
- fix: potential undefined dereference of sessionProperties during Solana accountChanged flow ([#34643](https://github.com/MetaMask/metamask-extension/pull/34643))
- fix: incorrect navigation upon refreshing the page during the social login onboarding ([#34716](https://github.com/MetaMask/metamask-extension/pull/34716))
- fix: add logic to revert state for smart contract account toggle if there is a blockchain state mismatch cp-13.0.0 ([#34745](https://github.com/MetaMask/metamask-extension/pull/34745))
- fix: redirect user to change password after failing ([#34722](https://github.com/MetaMask/metamask-extension/pull/34722))
- fix: social login flow links cp-13.0.0 ([#34718](https://github.com/MetaMask/metamask-extension/pull/34718))
- fix: patch profile-sync-controller to rename endpoint cp-13.0.0 ([#34721](https://github.com/MetaMask/metamask-extension/pull/34721))
- fix: show correct subtitle and redirect on view explorer ([#34723](https://github.com/MetaMask/metamask-extension/pull/34723))
- fix: Localize NetworkIndicator text ([#34648](https://github.com/MetaMask/metamask-extension/pull/34648))
- fix: update smart contract account toggle components to remove flickering and inconsistent state cp-13.0.0 ([#34664](https://github.com/MetaMask/metamask-extension/pull/34664))
- fix: reset `AccountTreeController` state after vault reset - cp-13.0.0 ([#34697](https://github.com/MetaMask/metamask-extension/pull/34697))
- fix: Update spacing between the account avatar and its details rows ([#34689](https://github.com/MetaMask/metamask-extension/pull/34689))
- fix: usd values in simulation metrics ([#34645](https://github.com/MetaMask/metamask-extension/pull/34645))
- fix: Fix silently dropped errors in UI ([#34383](https://github.com/MetaMask/metamask-extension/pull/34383))
- fix: polish welcome page copywriting and styles ([#34621](https://github.com/MetaMask/metamask-extension/pull/34621))
- fix: srp lock image update and remove follow x ([#34619](https://github.com/MetaMask/metamask-extension/pull/34619))
- fix: prevent asset reset to native on Send/Swap when navigating from token details cp-13.0.0 ([#34625](https://github.com/MetaMask/metamask-extension/pull/34625))
- fix: Fix silently dropped Sentry errors in background ([#34379](https://github.com/MetaMask/metamask-extension/pull/34379))
- fix: cp-13.0.0 update search logic for CAs ([#34358](https://github.com/MetaMask/metamask-extension/pull/34358))
- fix: hold insufficient balance alert until simulation is completed ([#33932](https://github.com/MetaMask/metamask-extension/pull/33932))
- fix: prevent "Request cannot be constructed from a URL that includes credentials" error ([#34278](https://github.com/MetaMask/metamask-extension/pull/34278))
- fix: dapp scanning on connect cp-13.0.0 ([#34606](https://github.com/MetaMask/metamask-extension/pull/34606))
- fix: fix token autodetection ([#34647](https://github.com/MetaMask/metamask-extension/pull/34647))
- fix: remove send gas validation ([#34646](https://github.com/MetaMask/metamask-extension/pull/34646))
- fix: enable multiple networks when added via dapp cp-13.0.0 ([#34507](https://github.com/MetaMask/metamask-extension/pull/34507))
- fix: removed 'Use a different login method' for non-social-login flow cp-13.0.0 ([#34618](https://github.com/MetaMask/metamask-extension/pull/34618))
- fix: Throw Password Outdated error when user enters old password cp-13.0.0 ([#34599](https://github.com/MetaMask/metamask-extension/pull/34599))
- fix: reset prefilled dest token when reopening Swap page cp-13.0.0 ([#34485](https://github.com/MetaMask/metamask-extension/pull/34485))
- fix: creation page button login with social copy cp-13.0.0 ([#34598](https://github.com/MetaMask/metamask-extension/pull/34598))
- fix: reset app warning upon SeedlessOnboarding actions success cp-13.0.0 ([#34595](https://github.com/MetaMask/metamask-extension/pull/34595))
- fix: clicking back multiple times from metametrics page cp-13.0.0 ([#34576](https://github.com/MetaMask/metamask-extension/pull/34576))
- fix: unlock page many attempts error time format and copywriting cp-13.0.0 ([#34577](https://github.com/MetaMask/metamask-extension/pull/34577))
- fix: extension update prompt in popup ([#34372](https://github.com/MetaMask/metamask-extension/pull/34372))
- fix: cp-13.0.0 allows editing non-evm accounts name ([#34552](https://github.com/MetaMask/metamask-extension/pull/34552))
- fix: activitylist fromtoken sourced from bridge controller ([#34521](https://github.com/MetaMask/metamask-extension/pull/34521))
- fix: cp-13.0.0 improve perf for network checkbox ([#34450](https://github.com/MetaMask/metamask-extension/pull/34450))
- fix: normalize signature request supporting `object` type ([#34054](https://github.com/MetaMask/metamask-extension/pull/34054))
- fix: handle RecoveryError at unlock when password is outdated cp-13.0.0 ([#34550](https://github.com/MetaMask/metamask-extension/pull/34550))
- fix: cp-13.0.0 ensure NetworkOrderController fallbacks to ethereum if all enabled networks removed. ([#34460](https://github.com/MetaMask/metamask-extension/pull/34460))
- fix: cp-13.0.0 fix displayed price for native tokens on token details page ([#34565](https://github.com/MetaMask/metamask-extension/pull/34565))
- fix: Set max limit of block gas used for gas estimation to 10M ([#34398](https://github.com/MetaMask/metamask-extension/pull/34398))
- fix: Fix silently dropped errors in shared code ([#34382](https://github.com/MetaMask/metamask-extension/pull/34382))
- fix: error text should not be dimmed when text field is disabled cp-13.0.0 ([#34545](https://github.com/MetaMask/metamask-extension/pull/34545))
- fix: fixed incorrect navigation upon clicking back/refresh actions from browser cp-13.0.0 ([#34541](https://github.com/MetaMask/metamask-extension/pull/34541))
- fix: security tab scroll capitalize social cp-13.0.0 ([#34514](https://github.com/MetaMask/metamask-extension/pull/34514))
- fix: asynchrous background password-sync check cp-13.0.0 ([#34534](https://github.com/MetaMask/metamask-extension/pull/34534))
- fix: add loader for onboarding unlock page cp-13.0.0 ([#34518](https://github.com/MetaMask/metamask-extension/pull/34518))
- fix: copy and style fixes for unlock page and creation page cp-13.0.0 ([#34511](https://github.com/MetaMask/metamask-extension/pull/34511))
- fix: password change rollback cp-13.0.0 ([#34520](https://github.com/MetaMask/metamask-extension/pull/34520))
- fix: set swap src chain based on selected asset cp-13.0.0 ([#34385](https://github.com/MetaMask/metamask-extension/pull/34385))
- fix: unified swaps label ([#34467](https://github.com/MetaMask/metamask-extension/pull/34467))
- fix: integrate phishing controller actions into NFT messengers cp-13.0.0 ([#34216](https://github.com/MetaMask/metamask-extension/pull/34216))
- fix: Reduce Solana snap activity while idle ([#34473](https://github.com/MetaMask/metamask-extension/pull/34473))
- fix: changes default label of bridge originated txs to swap from send ([#34476](https://github.com/MetaMask/metamask-extension/pull/34476))
- fix: cp-12.22.3 Stop persisting `permissionActivityLog` state ([#34465](https://github.com/MetaMask/metamask-extension/pull/34465))
- fix: use origin instead of mainFrameOrigin in trust signals middleware ([#34459](https://github.com/MetaMask/metamask-extension/pull/34459))
- fix: show tx alert when simulation error is ResultWithNegativeLamports ([#34477](https://github.com/MetaMask/metamask-extension/pull/34477))
- fix: Prevent redundant persist store updates ([#34506](https://github.com/MetaMask/metamask-extension/pull/34506))
- fix: cp-12.22.3 Stop polling multichain rates while idle ([#34474](https://github.com/MetaMask/metamask-extension/pull/34474))
- fix: updated reset wallet content for social account cp-13.0.0 ([#34466](https://github.com/MetaMask/metamask-extension/pull/34466))
- fix: make bg color on the loading screen in popup match bg of app ([#34346](https://github.com/MetaMask/metamask-extension/pull/34346))
- fix: cp-12.22.3 Fix frequent writes from CronjobController ([#34413](https://github.com/MetaMask/metamask-extension/pull/34413))
- fix: check if metametrics is done before redirecting to page on social cp-13.0.0 ([#34438](https://github.com/MetaMask/metamask-extension/pull/34438))
- fix: infinite loading on spending cap when selected chain differs from dapp cp-12.22.3 ([#34355](https://github.com/MetaMask/metamask-extension/pull/34355))
- fix: optimize unlock performance cp-13.0.0 ([#34436](https://github.com/MetaMask/metamask-extension/pull/34436))
- fix: check password outdated before import private key cp-13.0.0 ([#34400](https://github.com/MetaMask/metamask-extension/pull/34400))
- fix: handle keyring remove when import srp seedless error cp-13.0.0 ([#34403](https://github.com/MetaMask/metamask-extension/pull/34403))
- fix: cp-13.0.0 ensure we enable any missing networks when performing swap/bridge. ([#34376](https://github.com/MetaMask/metamask-extension/pull/34376))
- fix: update explorer button text in address qr code page to reflect the network's explorer name ([#34377](https://github.com/MetaMask/metamask-extension/pull/34377))
- fix: temporarily skip bridge metrics e2e test ([#34418](https://github.com/MetaMask/metamask-extension/pull/34418))
- fix: update popup-init.html's background colors to match latest designs ([#34347](https://github.com/MetaMask/metamask-extension/pull/34347))
- fix: remove loading spinner from create ethereum account flow ([#34374](https://github.com/MetaMask/metamask-extension/pull/34374))
- fix: update address qr code navigation to prevent infinite loop of navigation ([#34381](https://github.com/MetaMask/metamask-extension/pull/34381))
- fix: handle recovery ratelimit error cp-13.0.0 ([#34397](https://github.com/MetaMask/metamask-extension/pull/34397))
- fix: reset parsed search params after setting quote request inputs cp-13.0.0 ([#34389](https://github.com/MetaMask/metamask-extension/pull/34389))
- fix: Apple login cp-13.0.0 ([#34391](https://github.com/MetaMask/metamask-extension/pull/34391))
- fix: use button for quiz words instead of text-field cp-13.0.0 ([#34280](https://github.com/MetaMask/metamask-extension/pull/34280))
- fix: header titles in unified asset picker cp-13.0.0 ([#34365](https://github.com/MetaMask/metamask-extension/pull/34365))
- fix: show solana connected state ([#34375](https://github.com/MetaMask/metamask-extension/pull/34375))

## [12.23.1]

### Fixed

- fix: ensure "Update extension to the latest version" button in the update prompt work in browser-action popup (#34372)

## [12.23.0]

### Added

- feat: gasIncluded swaps cp-12-23.0 (#33988)
- feat: unskipeed send flow Solana tests (#34036)
- feat: add e2e tests for Ledger personal sign functionality (#34002)
- feat: 2.5 password-change syncing across multiple devices (#33415)
- feat(wallet-details): adds option to add account from wallet details (#33959)
- feat: Add remove action to account details page (#34024)
- feat: add ledger e2e tests for ERC20 deployment (#33898)
- feat: 2.3 sync multiple SRPs using social login (#33386)
- feat: Show < 0.01 when gas cost is really small (#33966)
- feat: 2.8 login error modals (#33612)
- feat: reveal srp list improvements (#34004)
- feat: retrieve outgoing transaction history (#33782)
- feat: 2.2 change password and security settings (#33385)
- feat: account details pages w/o 7702 (#33964)
- feat: allow multiple provider connections (#33746)
- feat: 2.4 reset wallet for social login flow (#33397)
- feat: 2.1 social login with UI (#33379)
- feat: removes bridge button when unified is enabled (#33970)
- feat: update show all SRP to use p instead of input (#33950)
- feat: Network Manager (disabled) (#33941)
- feat: Add new warning modal for removing accounts (#33962)
- feat: import srp hide show all cp-12.22.0 (#33949)
- feat: reveal srp use div cp-12.22.0 (#33948)
- feat: Add tracing for the smart transactions controller (#33926)
- feat: add wallet details page and update routing (#33837)
- feat: add wallet property to base account details (#33906)
- feat: display EVM swap txs in unified tx components (#33858)
- feat: 2.0 added `OAuthService` for social logins (#33378)
- feat: poll incoming transactions only when viewing transaction list (#33783)
- feat: srp backup reminder (#33750)
- feat: Prompt the user to switch all accounts on all networks to SCA (#33744)
- feat: hide accounts (#33790)
- feat: Add account selection to upgrade account splash page (#33698)
- feat: add native token logo for Soneium mainnet (#33839)
- feat: change to handle batched nested transactions as regular transaction (#33804)
- feat: add ledger sign typed v4 e2e tests (#33832)
- feat: pin account inside wallet (#33761)
- feat: swap transaction scanning and alerts (#33786)
- feat: add search bar (#33752)
- feat: add 7702 toggles (#33530)
- feat: Improve how we display detailed of approve function in nested transaction (#33609)
- feat: add `SEI` mainnet network support (#32027)
- feat: enable Arbitrum for smart transactions (#33864)
- feat: add the network and token logos for Omni and XRPL networks (#34005)
- feat:add logos for Abstract network (#33838)
- feat: validate same origin domain for signIn for Solana (#33982)

### Changed

- Update: the button component to be monochromatic (#33847)
- Update: design tokens v8: font family change CentraNo1 to Geist and new background colors (#33764)
- Update: update message when there is no DeFi positions wording (#34229)
- Update welcome screen buttons to use Button DS component (#34230)
- Set confirm srp quiz word to readonly (#34225)

### Fixed

- fix: solve when private key import field to always be in error state (#34050)
- fix: solve `Error: Ledger: Unknown error while signing transaction` (#33581)
- fix: regression of lanchdarkly flag key (#34045)
- fix: private key import field to always be in error state (#34050)
- fix: solve `Error: Ledger: Unknown error while signing transaction` (#33581)
- fix: cp-12.22.0 regression of lanchdarkly flag key (#34045)
- fix: bitcoin account type (#34021)
- fix: hides bridge button on non-native asset page if unified is enabled (#34044)
- fix: adds label for unified swap token approvals (#34034)
- fix: prevent infinite render in `WalletDetails` (#34016)
- fix: update follow us on twitter to x (#33990)
- fix: srp words are glitching when toggling show/hide all (#33991)
- fix: tiny-secp256k1 audit (#33995)
- fix: first address interaction alert when trust signal is verified (#33961)
- fix: bridge token address gets copied when Max button is clicked (#33965)
- fix: clicking normal buttons auto submit form (#33979)
- fix: changes in send call validations when batch confirmation is treated as regular send transaction (#33887)
- fix: flaky test `Editing Confirm Transaction allows accessing advance gas fee popover from edit gas fee popover` (#33954)
- fix: srp backup navigation and quiz cp-12.22.0 (#33922)
- fix: Prevent cronjob state from getting out of sync (#33923)
- fix: bump @metamask/multichain-api-client to 0.6.4 to handle multichain api not responding on page load (#33904)
- fix: grammar on activity tab (#31287)
- fix: Prevent `DeFiPositionsController` from polling while UI is closed (#33921)
- fix: Created new migration to remove disabledUpgradeAccountByChain from preferences controller state as old migration had error (#33830)
- fix: flaky test `Vault Corruption` loading increase time (#33916)
- fix: hides fromtoken from the totokenpicker (#33857)
- fix: flaky test `Send ETH from inside MetaMask finds the transaction in the transactions list using advanced gas modal` (#33894)
- fix: scroll to bottom not being triggered on some devices (#33888)
- fix: Change tooltip position on network indicator (#33880)
- fix: Add logic to remove all account labels when needed (#33868)
- fix: fix how different approval types are displayed for batched confirmations (#33809)
- fix: fix pbkdf2 yarn audit (#33863)
- fix: Add missing hooks to `wallet_addEthereumChain` (#33821)
- fix: resubscribe notifications v2 on app startup. (#33805)
- fix: z-index of app header (#33133)
- fix: back srp reveal accessibility and refresh issue (#33807)
- fix: prioritize Contentful banners over hardcoded ones (#33816)
- fix: Using sorting by timestamp for EVM transactions also cp-12.21.0 (#33826)
- fix: Initialize NetworkController completely so it can report errors to Sentry (#33607)
- fix: flaky test `Simulation Details renders buy ERC20 transaction` (#33800)
- fix: replace "Remind" with "remind" in deep link locale messages (#33780)
- fix: flaky `Token List` and `Token Details` specs (#33772)
- fix: prevent swapping between native assets (#34257)
- fix: disconnect of EVM scopes when removing Solana permissions while being connected with Wallet Standard (#33821)
- fix: resume metametrics if not set yet when closing/opening app during onboarding (#34177)
- fix: handle if srp length pasted is not equal to defined srp lengths (#34183)
- fix: cp-12.22.0 flaky `Token List` and `Token Details` specs (#33772)
- fix: bridge tx detail layout fix (#33860)
- fix: Solana single-chain swap failure event not firing on src-chain (#33811)
- fix: max button was shown on native assets incorrectly causing invalid quotes (#34293)
- fix: migrate BSC network RPC from bsc-dataseed.binance.org to bsc infura (#33997)

## [12.22.3]

### Fixed

- fix: resolve infinite loading on spending cap when selected chain differs from dapp (#34355)
- fix: prevent frequent writes while the wallet UI is closed (#34413, #34465, #34506, #34473, #34474)

## [12.22.2]

### Fixed

- Fix crash on older browsers (#34255)

## [12.22.1]

### Fixed

- Display sent amounts from the active swap quote when showing approval warnings to prevent parsing non-numerical inputs (#34156)

## [12.22.0]

### Added

- New onboarding flow (#33704 and others)
- Added basic functionality banner in the carousel (#33095)
- New Multichain Accounts List Menu (#33657)
- Deep links feature (#33663 and others)
- Indicate enforced simulations are active through alternate copy and icon (#33699)
- Added trust signal indicators to the address petname component (#33670)
- Added Berachain, ApeChain and EDU Chain (#33587)
- Do not run trust signals middleware if the user has disabled security alert (#33747)
- Scan the dapp url for malicious behavior when eth_requestAccounts is called (#33627)
- Sync address book contacts (#32632)
- Hooks to enforce simulated balance changes in the future (#33531)
- Display amount of nested transaction in a batch confirmation (#33558)
- Onboard new users with Smart Account opted in by default (#33548)
- Enables Backup & Sync for all users through a migration (#33551)
- Return in wallet_getCapabilities of gasless is supported for an account (#33533)
- Added MultichainAccountTree component (#33647)
- Added support for unified UI (swapping and bridging on a singular page) (#33487)
- Added a base account details component (#33277)
- Added a selector for building new multichain accounts menu (#33606)
- Added provisional Ocap Kernel integration (#33545)
- Integrated the enabledNetworks state from the NetworkOrderController (#33478)
- Empowered the UI to display trust signals for the verifyingContract (#33573)
- Added multi-SRP EVM Account Syncing (#32951)
- Added option to hide SRP pill from account list item (#33544)
- Detect an updated Extension available and prompt for restart (#33381)
- Migration to remove permissions for deleted networks (#33484)
- Added Katana network logo (#33008)
- Bitcoin integration improvements (#33402)
- Added support for remote mode on activity list (#33157)
- Discover bitcoin accounts from SRP import (#33124)
- Prioritize Contentful slides to the start of the banner (#33271)
- Add the MultiTokenPeriod caveat to the send allowance delegation (#33155)
- Allow users to selectively enable specific networks while disabling others (#33114)
- Use the new afterAdd hook to update the transaction when remote mode is available (#33115)

### Changed

- Updated OP logo (#33399)
- Updated connection background and fixed design nits (#33100)
- Adapt the styles of the price chart loading and empty states (#33139)
- Removed snap confirmation page from Swap/Bridge page (#33778)
- Form text field margin and helptext (#33710)
- Updated the NetworkController to enable Base network by default (#33448)

### Fixed

- Update link to MetaMask CLA (#30940)
- Fixed a case where non-unique words in confirm seed phrase would break the SRP quiz (#33781)
- Display "Switch back" instead of "Switch" for smart accounts (#33724)
- Fixed `clipboardRead` permission request in Firefox (#33701)
- Set non-EVM networks to the bottom of the network list unless they are sorted by the user (#33644)
- Fixed migration 165 for the cronjob controller in the case where the previous state doesn't have an events property (#33652)
- Fixes a copy address issue (#33588)
- Fixed "Terms of Use"'s `Approve` button enablement on screens with sub-pixel scaling/scrolling (#33605)
- Remove bitcoin preferences migration (#33554)
- Allow all Bitcoin account types (#33516)
- Fixed performance and memory leak issues in the bridge amount input field and asset picker components (#33507)
- Fixed race condition in send flow validation for token balance check (#33172)
- Fixed max Solana bridge amount based on minimum balance for rent exemption v2 (#33353)
- Disabled non EVM networks on locked screen (#33481)
- Set Solana slippage to 'Auto' in the UI to match with the dynamic slippage that is set by default (#33254)
- Gracefully end sub-stream on port disconnect to prevent Premature close error (#33470)
- Fixed infinite loader in account modal due to not being able to load 7702 network information (#33472)
- Fixed migration for users who do not have tokenListController state (#33439)
- Fixed "max" option in send flow for L2 networks (#33171)
- Carousel slide improved validation for zero balance (#33243)
- Updated the UI to only display the $ symbol and amount after the token quantity has been entered (#33242)
- Fixed case of swapping from USDC on Solana via asset page (#33097)
- Open import SRP button in the existing popup instead of a new window (#33219)
- Provide fallback symbols for missing Solana images (#33206)
- Hide total fiat value when any approval simulation have "unlimited" approvals (#33168)
- Populate gas and gasPrice in requests to security alerts API and PPOMController (#33180)
- When displaying permit signature values as Unlimited, verify against the threshold after applying token decimals (#33194)
- Hide the backup srp reminders for first party snap accounts created from an imported SRP (#33047)
- Support upgrade on accounts imported from private key (#33170)
- Switch account option should not be available for hardware wallet account (#33569)
- Prompt for automated vault recovery from internal vault backup if corruption is detected (#32006)
- Improve useSnapAssetDisplay performance (#33138)

## [12.20.1]

### Changed

- This changelog was split off with 12.22.0
- All older changes can be found in [docs/CHANGELOG_older.md](https://github.com/MetaMask/metamask-extension/blob/main/docs/CHANGELOG_older.md)

[Unreleased]: https://github.com/MetaMask/metamask-extension/compare/v13.1.0...HEAD
[13.1.0]: https://github.com/MetaMask/metamask-extension/compare/v12.23.1...v13.1.0
[12.23.1]: https://github.com/MetaMask/metamask-extension/compare/v12.23.0...v12.23.1
[12.23.0]: https://github.com/MetaMask/metamask-extension/compare/v12.22.3...v12.23.0
[12.22.3]: https://github.com/MetaMask/metamask-extension/compare/v12.22.2...v12.22.3
[12.22.2]: https://github.com/MetaMask/metamask-extension/compare/v12.22.1...v12.22.2
[12.22.1]: https://github.com/MetaMask/metamask-extension/compare/v12.22.0...v12.22.1
[12.22.0]: https://github.com/MetaMask/metamask-extension/compare/v12.20.1...v12.22.0
[12.20.1]: https://github.com/MetaMask/metamask-extension/releases/tag/v12.20.1
