# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [13.2.0]

### Uncategorized

- ci: adapt the post-merge-validation job to track progress in a sheet ([#35118](https://github.com/MetaMask/metamask-extension/pull/35118))
- chore: upgrading design system library packages ([#35105](https://github.com/MetaMask/metamask-extension/pull/35105))
- chore: update design system documentation ([#35103](https://github.com/MetaMask/metamask-extension/pull/35103))
- chore: removes the Solana modal from the initial flow ([#34988](https://github.com/MetaMask/metamask-extension/pull/34988))
- chore: bump institutional snap cp-13.1.1 ([#35053](https://github.com/MetaMask/metamask-extension/pull/35053))
- chore: add frax network and token logos ([#34986](https://github.com/MetaMask/metamask-extension/pull/34986))
- refactor: Migrate `<Routes />` into a TypeScript functional component ([#33276](https://github.com/MetaMask/metamask-extension/pull/33276))
- refactor(5560): migrate create-account.component.js to react-router-v5-compat ([#35011](https://github.com/MetaMask/metamask-extension/pull/35011))
- chore: Disable transaction resubmit (same is done in mobile) ([#35028](https://github.com/MetaMask/metamask-extension/pull/35028))
- release: Master sync v13.0.1 into main ([#35027](https://github.com/MetaMask/metamask-extension/pull/35027))
- Merge origin/main into master-sync
- refactor: import getCaip25PermissionFromLegacyPermissions and request requestPermittedChainsPermissionIncremental from chain agnostic permission package ([#34823](https://github.com/MetaMask/metamask-extension/pull/34823))
- test: Rename E2E test to run it in CI ([#35017](https://github.com/MetaMask/metamask-extension/pull/35017))
- ci: adapt PR size job to have permissions to add labels ([#34981](https://github.com/MetaMask/metamask-extension/pull/34981))
- test: Migrate request queuing chainid-check test to Typescript and POM ([#34760](https://github.com/MetaMask/metamask-extension/pull/34760))
- test: Force exit after running E2E test ([#34966](https://github.com/MetaMask/metamask-extension/pull/34966))
- refactor: use named imports for actions in `ImportSrp` ([#34976](https://github.com/MetaMask/metamask-extension/pull/34976))
- ci(next semver version): rely on package.json when crafting next semver version ([#34855](https://github.com/MetaMask/metamask-extension/pull/34855))
- test: move power-user.spec.ts so it runs ([#34979](https://github.com/MetaMask/metamask-extension/pull/34979))
- chore: remove old BridgeQuoteCard component ([#34949](https://github.com/MetaMask/metamask-extension/pull/34949))
- chore: bump multichain account dependencies ([#34963](https://github.com/MetaMask/metamask-extension/pull/34963))
- test: add power user persona E2E test ([#34925](https://github.com/MetaMask/metamask-extension/pull/34925))
- ci: add missing teams for the `identify-codeowners` job ([#34944](https://github.com/MetaMask/metamask-extension/pull/34944))
- chore: update `SEI` network's name from `Sei Network` to `Sei Mainnet` ([#34930](https://github.com/MetaMask/metamask-extension/pull/34930))
- refactor: Add route constants infrastructure for React Router v5-compat migration ([#34891](https://github.com/MetaMask/metamask-extension/pull/34891))
- fix(security): obfuscate blurred SRP to prevent blur-reversal attacks ([#34288](https://github.com/MetaMask/metamask-extension/pull/34288))
- chore: update browserslist dependencies ([#34915](https://github.com/MetaMask/metamask-extension/pull/34915))
- test: cleanup some Multichain API e2e tests ([#34817](https://github.com/MetaMask/metamask-extension/pull/34817))
- chore: Bump Snaps packages ([#34907](https://github.com/MetaMask/metamask-extension/pull/34907))
- perf: Exclude test assets in production ([#34690](https://github.com/MetaMask/metamask-extension/pull/34690))
- chore: Revert "feat: set default theme to dark (#34274)" ([#34274](https://github.com/MetaMask/metamask-extension/pull/34274))
- test: Fixed the asset list test ([#34710](https://github.com/MetaMask/metamask-extension/pull/34710))
- test: Support window switching without WebSocket background connection ([#34772](https://github.com/MetaMask/metamask-extension/pull/34772))
- ci: add RCA-needed label on RCA workflow ([#34904](https://github.com/MetaMask/metamask-extension/pull/34904))
- test: rename POM methods to use camel case ([#34902](https://github.com/MetaMask/metamask-extension/pull/34902))
- ci: post validation bot to add a checklist in `feat` and `perf` PRs #17937 ([#34896](https://github.com/MetaMask/metamask-extension/pull/34896))
- refactor: DRY our HTML by using ETA partials ([#34842](https://github.com/MetaMask/metamask-extension/pull/34842))
- test: add missing tests for `getWalletIdAndNameByAccountAddress` selector ([#34844](https://github.com/MetaMask/metamask-extension/pull/34844))
- test: Speed up test server shutdown by closing connections ([#34747](https://github.com/MetaMask/metamask-extension/pull/34747))
- test: request-queue WatchAsset flakyness ([#34835](https://github.com/MetaMask/metamask-extension/pull/34835))
- chore: Improve accuracy of test error inline comments ([#34404](https://github.com/MetaMask/metamask-extension/pull/34404))
- test: Optimize test server shutdown ([#34707](https://github.com/MetaMask/metamask-extension/pull/34707))
- fix(snaps): Catch `handleSnapRequest` error in `SnapInterfaceContext` ([#34857](https://github.com/MetaMask/metamask-extension/pull/34857))
- test: Migrate request queuing dapp1-send-dapp2-signTypedData test to Typescript and POM ([#34696](https://github.com/MetaMask/metamask-extension/pull/34696))
- bump(deps): Bitcoin 0.18.0 ([#34741](https://github.com/MetaMask/metamask-extension/pull/34741))
- chore: Bump main version to 13.2.0 ([#34840](https://github.com/MetaMask/metamask-extension/pull/34840))
- fix(action): pass version tag instead of a branch name to github-tools ([#34837](https://github.com/MetaMask/metamask-extension/pull/34837))
- chore: Remove obsolete policy overrides ([#34818](https://github.com/MetaMask/metamask-extension/pull/34818))
- chore: Skip a flaky test for now ([#34829](https://github.com/MetaMask/metamask-extension/pull/34829))
- test: Fix console error in onboarding E2E tests ([#34627](https://github.com/MetaMask/metamask-extension/pull/34627))
- chore: put comments back in `.yarnrc.yml` ([#34641](https://github.com/MetaMask/metamask-extension/pull/34641))
- chore: updated release workflows to eliminate confusion ([#34717](https://github.com/MetaMask/metamask-extension/pull/34717))
- chore: cp-13.1.0 Add missing bundle environment variables ([#34789](https://github.com/MetaMask/metamask-extension/pull/34789))
- test: remove unnecessary balance-check race in test ([#34793](https://github.com/MetaMask/metamask-extension/pull/34793))
- build(webpack): fix webpack build paths on windows ([#34778](https://github.com/MetaMask/metamask-extension/pull/34778))
- release: Master sync v13.0.0 into main ([#34788](https://github.com/MetaMask/metamask-extension/pull/34788))
- chore: Remove `@sentry/browser` from main bundles ([#34567](https://github.com/MetaMask/metamask-extension/pull/34567))
- Merge origin/main into master-sync
- chore: bump @metamask/profile-sync-controller to ^23.0.0 ([#34746](https://github.com/MetaMask/metamask-extension/pull/34746))
- test(e2e): Deflake `onStart` lifecycle hook test ([#34769](https://github.com/MetaMask/metamask-extension/pull/34769))
- refactor: remove password strength metrics from wallet events ([#34714](https://github.com/MetaMask/metamask-extension/pull/34714))

### Added

- feat: Add Linea for Smart Transactions, bump smart-transactions-controller to ^18.1.0 ([#35117](https://github.com/MetaMask/metamask-extension/pull/35117))
- feat: add discover button for Solana network ([#34498](https://github.com/MetaMask/metamask-extension/pull/34498))
- feat: get all internal accounts for a given scope (non user facing change) ([#35044](https://github.com/MetaMask/metamask-extension/pull/35044))
- feat: update seedless-onboarding-controller to 2.6.0 ([#35050](https://github.com/MetaMask/metamask-extension/pull/35050))
- feat: Add the selection process for multichain accounts ([#34989](https://github.com/MetaMask/metamask-extension/pull/34989))
- feat: allow offline unlock for social login users ([#34996](https://github.com/MetaMask/metamask-extension/pull/34996))
- feat: SWAPS-2692 price impact quotecard ([#34951](https://github.com/MetaMask/metamask-extension/pull/34951))
- feat: Add the multichain account list page ([#34836](https://github.com/MetaMask/metamask-extension/pull/34836))
- feat: add CSS-based loading timeout message ([#34530](https://github.com/MetaMask/metamask-extension/pull/34530))
- feat: added onboarding download app page ([#34825](https://github.com/MetaMask/metamask-extension/pull/34825))
- feat: hide remove imported account button for social login ([#34895](https://github.com/MetaMask/metamask-extension/pull/34895))
- feat: add `getInternalAccountByGroupAndCaip` and `getInternalAccountBySelectedAccountGroupAndCaip` selectors ([#34884](https://github.com/MetaMask/metamask-extension/pull/34884))
- feat: better manage automatic labeling of Sentry issues ([#34768](https://github.com/MetaMask/metamask-extension/pull/34768))
- feat: consume send bundle feature flag to determine `alternateGasFee` support ([#34733](https://github.com/MetaMask/metamask-extension/pull/34733))

### Fixed

- fix: redact email from state logs ([#35119](https://github.com/MetaMask/metamask-extension/pull/35119))
- fix: work around Firefox bug by avoiding vault backup when `indexedDB` is not available ([#35040](https://github.com/MetaMask/metamask-extension/pull/35040))
- fix: sanitize sensitive items from UI state ([#35003](https://github.com/MetaMask/metamask-extension/pull/35003))
- fix: show effective gas in swaps QuoteCard cp-13.1.0 ([#35038](https://github.com/MetaMask/metamask-extension/pull/35038))
- fix: wrap long text in `OriginPill` component ([#34824](https://github.com/MetaMask/metamask-extension/pull/34824))
- fix: skip metametrics if user has already chosen an option ([#35036](https://github.com/MetaMask/metamask-extension/pull/35036))
- fix: storybook g.trim bug ([#35002](https://github.com/MetaMask/metamask-extension/pull/35002))
- fix: cp-13.0.1 correct defi polling ([#34883](https://github.com/MetaMask/metamask-extension/pull/34883))
- fix: fixed invalid refresh token after login attempt cp-13.0.1 ([#34961](https://github.com/MetaMask/metamask-extension/pull/34961))
- fix: Remove hover state when `SnapUISelector` is disabled ([#34964](https://github.com/MetaMask/metamask-extension/pull/34964))
- fix: flaky test `Forgot password resets password and then unlock wallet with new password`, `Migrate vault with old encryption` and `Lock and unlock` ([#34888](https://github.com/MetaMask/metamask-extension/pull/34888))
- fix: cp-13.1.0 bump solana snap ([#34887](https://github.com/MetaMask/metamask-extension/pull/34887))
- fix: handle undefined destination account in bridge ([#34943](https://github.com/MetaMask/metamask-extension/pull/34943))
- fix: add slippage to quote card cp-13.1.0 ([#34916](https://github.com/MetaMask/metamask-extension/pull/34916))
- fix: add `account_type` property to the Wallet Created event cp-13.1.0 ([#34889](https://github.com/MetaMask/metamask-extension/pull/34889))
- fix: slippage update on unified cp-13.1.0 ([#34821](https://github.com/MetaMask/metamask-extension/pull/34821))
- fix: moved pwd-change to background cp-13.1.0 ([#34852](https://github.com/MetaMask/metamask-extension/pull/34852))
- fix: flaky test `Developer Options - Sentry gives option to cause a page crash and offer contact support option with consenting to share data` ([#34866](https://github.com/MetaMask/metamask-extension/pull/34866))
- fix: problem in `yarn start:with-state` ([#34851](https://github.com/MetaMask/metamask-extension/pull/34851))
- fix: Fix metric transaction type for bridge and swap transactions ([#34594](https://github.com/MetaMask/metamask-extension/pull/34594))
- fix: flaky test `Multichain Aggregated Balances shows correct aggregated balance when "Current Network" is selected` ([#34856](https://github.com/MetaMask/metamask-extension/pull/34856))
- fix: flaky test `Editing Confirm Transaction goes back from confirm page to edit eth value, baseFee, priorityFee and gas limit - 1559 V2` ([#34854](https://github.com/MetaMask/metamask-extension/pull/34854))
- fix: flaky test `Address Book Sends to an address book entry on a different network` ([#34834](https://github.com/MetaMask/metamask-extension/pull/34834))
- fix: Hide resimulate alert if transaction is wallet initiated ([#34782](https://github.com/MetaMask/metamask-extension/pull/34782))
- fix: gracefully handle account type lookup error when wallet is locked (metrics) ([#34406](https://github.com/MetaMask/metamask-extension/pull/34406))
- fix: Fix misleading console warning ([#34816](https://github.com/MetaMask/metamask-extension/pull/34816))
- fix: bump @metamask/multichain-api-client to v0.6.5 ([#34783](https://github.com/MetaMask/metamask-extension/pull/34783))

## [13.0.1]

### Fixed

- fix: invalid refresh token error thrown when wallet was locked before some background requests completed (#34961)
- fix: bridging to Solana without a Solana account failing on legacy extensions (#34943)
- fix: polling rate being set to 1 minute instead of 10 minutes (#34883)

## [13.0.0]

### Added

- feat: prefill token in unified swaps experience (#34038)
- feat: 2.13 seedlessonboardingcontroller 2.2.0 update (#34240)
- feat(INFRA-2772): add failure notifications for nightly build failures (#34345)
- feat: 2.7 segment onboarding (#33553)
- feat: bump smart-transactions-controller to ^17.0.0 (#34321)
- feat: 2.6 sentry onboarding (#33441)
- feat: set default theme to dark (#34274)
- feat: add multichainaddressrow component with stories and tests (#34328)
- feat: add metametrics to backup and sync modal (#34332)
- feat: 2.10 handle private key sync restore and sync srp (#34311)
- feat: add metamask mobile slide and modal (#33673)
- feat(INFRA-2772): update release workflow to include version bump to main (#34304)
- feat: separate `development` and `qa (dist)` enviroments for social login (#34313)
- feat: update copywriting on import private key for social login user (#34315)
- feat: add trust signals to confirminforowurl w/ alerts (#33974)
- feat: enable dapp scanning (#33775)
- feat: dapp scanning enabled on transactions and signatures (#33829)
- feat: pass discovered accounts data to the metrics event (#33927)
- feat: release networkmanager & remove network picker (#33459)
- feat: add 7702 to new accounts details (#34008)
- feat: implement tailwind css and design system libraries in the extension (#30170)
- feat: 2.9 update seedlessonboardingcontroller to v2 (incl. keyring key backup instead of password) (#34027)
- feat: add support to access the private key from account details (#34030)
- feat: enable apple login (#34072)
- feat: add support for show srp from accounts details (#34026)
- feat: pre-fills Swap amount, src token and dest tokens based on deep-link query parameters (#34259)
- feat: enable SeedlessOnboarding (#34429)
- feat: update fee label when gas is include in swap rate (#34146)
- feat: integrate phishing controller actions into NFT messengers (#34216)
- feat: add loader for onboarding unlock (#34518)

### Changed

- update: change homepage button colors and header styling (#34209)
- update: remove unified swaps legacy and portfolio fallbacks (#34290)
- update: change ui's background communications to use a single notification listener instead of two (#33211)
- update: change the Password Sync checks and optimize the Wallet Unlock operation for the Social Login flow (#34436)
- update: replaced Reset Wallet button with Use a different method to Login in the Onboarding unlock page (#34505)
- update: change unlock pages error message for too many attempts and time format (#34577)
- update: remove the Use a different login method button from Unlock page if user is not on social-login flow (#34618)
- update: rename Profile sync request from /api/v2/profile/metametrics to /api/v2/profile/lineage (#34735)
- update: Update or add support links on password form, password change modal, import account modal, abd srp quiz modal (#34718)

### Fixed

- fix: align asset page buttons and fix homepage scrolling (#34342)
- fix: password form terms social and srp (#34350)
- fix: show contacts for all chains (#34307)
- fix: add toast and remove focus state (#34356)
- fix: set fixed height on pin-extension carousel slides (#34351)
- fix: fix token details percentage (#34354)
- fix: multi srp sync loading remove (#34226)
- fix: hide import nft button on trx history list (#34340)
- fix: display testnets for development mode (#34308)
- fix: remove switch network toast (#34252)
- fix: ellipses on long label names in destination acct picker (#34309)
- fix: migrate bsc network rpc from bsc-dataseed.binance.org to bsc infura (#33997)
- fix: ensure network deselect update the underlying network controller to an enable network (#34248)
- fix: no positions wording update (#34229)
- fix: update the multichain wallet header in the account list (#34325)
- fix: change navigation to history.goback (#34245)
- fix: move onclick handlers for base account details to the row level (#34243)
- fix: ensure networkordercontroller isn't reset when extension is reload (#34320)
- fix: ledger error import new accounts (#34242)
- fix: overwrite eth token logo (#34224)
- fix: hide nested transaction tag when only 1 transaction is present (#34000)
- fix: skip first-time interaction alert for first-party contracts (#34001)
- fix: remove max button for native assets for now (#34293)
- fix: use aggregate balance for srp list item balance (#34215)
- fix: localize message for networkmanager (#34263)
- fix: render add account button only for hd wallets (#34247)
- fix: remove live network requests from seedless onboarding e2e tests (#34265)
- fix: prevent swap between native assets (#34257)
- fix: add changes to multichain accounts ui (#34190)
- fix: show avatar account on all screens except header (#34273)
- fix: fix select a contact during the Send flow does not clear when switching networks and send flow shows Select network (#34234)
- fix: add performance tracing to UserStorage syncing features to improve monitoring and debugging capabilities (#34032)
- fix: set confirm srp quiz word to readonly (#34225)
- fix: resume metametrics if not set yet when close/open app during onboarding (#34177)
- fix: use primary and secondary variants (#34230)
- fix: fix crash on older browser versions (#34255)
- fix: change from use `value` param to `amount` for swaps/bridge (#34035)
- fix: address namedisplay component to show full address display name (#34188)
- fix: handle if srp length paste is not equal to define srp lengths (#34183)
- fix: prevent fetch invalid bridge quotes when dest address is not define cp-12.23.0 (#34115)
- fix: solana onboarding from connect page (#34187)
- fix: ui fixes in upgrade account page (#34084)
- fix: show network manager if network not reach (#34197)
- fix: account list agg balance (#34179)
- fix: add warning message for ledger connection issues on firefox cp-12.23.0 (#33915)
- fix: network form (#34070)
- fix: use transaction request network chainid for ppom validation (#34175)
- fix: fix aggregate balances (#34134)
- fix: deselect network should not call setactive network (#34116)
- fix: ignore ld flag when hide snap confirmation page cp-12.23.0 (#34151)
- fix: make flask experimental area full page (#34167)
- fix: do not show backup reminder/notification when use social account (#34142)
- fix: remove back button on wallet already exist and wallet not found pages (#34130)
- fix: defi positions polling fix (#34023)
- fix: use activequote amounts when display approval banners cp-12.22.1 (#34156)
- fix: read issingleswapbridgebuttonenabled flag to show unified swaps cp-12.23.0 (#34153)
- fix: feature flag enable networks on transaction history filter (#34149)
- fix: ensure extension version has change when browser's onupdate event is fire (#34144)
- fix: open `visitsupportdataconsentmodal` when `globalmenu` "support" button is click (#33658)
- fix: adjust spacing between account divider account (#34129)
- fix: add scenario for send flow fields validation for btc (#34113)
- fix: replace reveal srp modal with reveal srp page cp-12.23.0 (#34013)
- fix: bitcoin account synchronization when no history (#34053)
- fix: change the copy in the unified swaps flow asset picker to be more intuitive (#34365)
- fix: reset parsed search params after setting quote request inputs (#34389)
- fix: allow users to login with apple accounts (#34391)
- fix: use button for quiz words instead of text-field (#34280)
- fix: handle recovery ratelimit error (#34397)
- fix: show solana connection status in dapp view (#34375)
- fix: check password outdated before import private key for social log in user (#34400)
- fix: handle keyring remove when import srp seedless error (#34403)
- fix: validate if metametrics is done before redirecting to page on social (#34438)
- fix: update reset wallet content for seedless accounts (#34466)
- fix: ensure networks are enabled when performing swap/bridge (#34376)
- fix: set swap src chain based on selected asset cp-13.0.0 (#34385)
- fix: copywriting and minor ui styles on Unlock page and creation page (#34511)
- fix: capitalize social login type (Apple, Google) and remove double scroll on settings - srp list (#34514)
- fix: properly revert keyring password and encryption key on password change rollback (#34520)
- fix: add vault expiry info modal for old password recovery scenarios (#34118)
- fix: prevent password field error text from dimming when field is disabled (#34545)
- fix: add vault expiry modal for old password recovery scenarios (#34118)
- fix: prevent incorrect onboarding navigation on browser back/refresh actions in social login flow (#34541)
- fix: prevent background password sync checks from affecting UI state (#34542)
- fix: prevent password field error text from dimming when field is disabled (#34564)
- fix: handle RecoveryError at unlock when password is outdated (#34571)
- fix: defer network manager selection logic to prevent blocking toggles (#34450)
- fix: correctly displayed price for native tokens on token details page after enabling a network(#34565)
- fix: allow editing non-evm accounts name (#34552)
- fix: ensure NetworkOrderController fallbacks to ethereum if all enabled networks removed (#34460)
- fix: fix incorrect redirection when clicking back multiple times from metametrics page (#34576)
- fix: reset app warning upon SeedlessOnboarding actions success (#34595)
- fix: add button with hover effect on creation page and fix copywriting for Login with Social (#34598)
- fix: reset prefilled dest token when reopening Swap page (#34485)
- fix: set the correct error thrown when the user unlocks wallet with the old password (#34599)
- fix: enable multiple networks when added via dapp (#34507)
- fix: update address QR code navigation to prevent infinite loop of navigation (#34679)
- fix: ensure user to login when seedless password is changed while user waiting for password submit rate limit (#34632)
- fix: fix issue with PUMP token not appearing on asset picker (#34358)
- fix: prevent asset reset to native on Send/Swap when navigating from token details (#34625)
- fix: prevent where some old wallet data being wrongly kept (on the account list) after resetting the wallet (#34697)
- fix: update smart contract account toggle components to remove flickering and inconsistent state (#34664)
- fix: add logic to revert state for smart contract account toggle if there is a blockchain state mismatch (#34745)

## [12.23.1]

### Fixed

- fix: ensure "Update extension to the latest version" button in the update prompt work in browser-action popup (#34372)

## [12.23.0]

### Added

- feat: gasIncluded swaps cp-12-23.0 (#33988)
- feat: unskipeed send flow Solana tests (#34036)
- feat: add e2e tests for Ledger personal sign functionality (#34002)
- feat: 2.5 password-change syncing across multiple devices (#33415)
- feat(wallet-details): adds option to add account from wallet details (#33959)
- feat: Add remove action to account details page (#34024)
- feat: add ledger e2e tests for ERC20 deployment (#33898)
- feat: 2.3 sync multiple SRPs using social login (#33386)
- feat: Show < 0.01 when gas cost is really small (#33966)
- feat: 2.8 login error modals (#33612)
- feat: reveal srp list improvements (#34004)
- feat: retrieve outgoing transaction history (#33782)
- feat: 2.2 change password and security settings (#33385)
- feat: account details pages w/o 7702 (#33964)
- feat: allow multiple provider connections (#33746)
- feat: 2.4 reset wallet for social login flow (#33397)
- feat: 2.1 social login with UI (#33379)
- feat: removes bridge button when unified is enabled (#33970)
- feat: update show all SRP to use p instead of input (#33950)
- feat: Network Manager (disabled) (#33941)
- feat: Add new warning modal for removing accounts (#33962)
- feat: import srp hide show all cp-12.22.0 (#33949)
- feat: reveal srp use div cp-12.22.0 (#33948)
- feat: Add tracing for the smart transactions controller (#33926)
- feat: add wallet details page and update routing (#33837)
- feat: add wallet property to base account details (#33906)
- feat: display EVM swap txs in unified tx components (#33858)
- feat: 2.0 added `OAuthService` for social logins (#33378)
- feat: poll incoming transactions only when viewing transaction list (#33783)
- feat: srp backup reminder (#33750)
- feat: Prompt the user to switch all accounts on all networks to SCA (#33744)
- feat: hide accounts (#33790)
- feat: Add account selection to upgrade account splash page (#33698)
- feat: add native token logo for Soneium mainnet (#33839)
- feat: change to handle batched nested transactions as regular transaction (#33804)
- feat: add ledger sign typed v4 e2e tests (#33832)
- feat: pin account inside wallet (#33761)
- feat: swap transaction scanning and alerts (#33786)
- feat: add search bar (#33752)
- feat: add 7702 toggles (#33530)
- feat: Improve how we display detailed of approve function in nested transaction (#33609)
- feat: add `SEI` mainnet network support (#32027)
- feat: enable Arbitrum for smart transactions (#33864)
- feat: add the network and token logos for Omni and XRPL networks (#34005)
- feat: add logos for Abstract network (#33838)
- feat: validate same origin domain for signIn for Solana (#33982)

### Changed

- Update: the button component to be monochromatic (#33847)
- Update: design tokens v8: font family change CentraNo1 to Geist and new background colors (#33764)
- Update: update message when there is no DeFi positions wording (#34229)
- Update welcome screen buttons to use Button DS component (#34230)
- Set confirm srp quiz word to readonly (#34225)

### Fixed

- fix: solve when private key import field to always be in error state (#34050)
- fix: regression of lanchdarkly flag key (#34045)
- fix: solve `Error: Ledger: Unknown error while signing transaction` (#33581)
- fix: bitcoin account type (#34021)
- fix: hides bridge button on non-native asset page if unified is enabled (#34044)
- fix: adds label for unified swap token approvals (#34034)
- fix: prevent infinite render in `WalletDetails` (#34016)
- fix: update follow us on twitter to x (#33990)
- fix: srp words are glitching when toggling show/hide all (#33991)
- fix: tiny-secp256k1 audit (#33995)
- fix: first address interaction alert when trust signal is verified (#33961)
- fix: bridge token address gets copied when Max button is clicked (#33965)
- fix: clicking normal buttons auto submit form (#33979)
- fix: changes in send call validations when batch confirmation is treated as regular send transaction (#33887)
- fix: srp backup navigation and quiz cp-12.22.0 (#33922)
- fix: Prevent cronjob state from getting out of sync (#33923)
- fix: bump @metamask/multichain-api-client to 0.6.4 to handle multichain api not responding on page load (#33904)
- fix: grammar on activity tab (#31287)
- fix: Prevent `DeFiPositionsController` from polling while UI is closed (#33921)
- fix: Created new migration to remove disabledUpgradeAccountByChain from preferences controller state as old migration had error (#33830)
- fix: hides fromtoken from the totokenpicker (#33857)
- fix: scroll to bottom not being triggered on some devices (#33888)
- fix: Change tooltip position on network indicator (#33880)
- fix: Add logic to remove all account labels when needed (#33868)
- fix: fix how different approval types are displayed for batched confirmations (#33809)
- fix: fix pbkdf2 yarn audit (#33863)
- fix: Add missing hooks to `wallet_addEthereumChain` (#33821)
- fix: resubscribe notifications v2 on app startup. (#33805)
- fix: z-index of app header (#33133)
- fix: back srp reveal accessibility and refresh issue (#33807)
- fix: prioritize Contentful banners over hardcoded ones (#33816)
- fix: Using sorting by timestamp for EVM transactions also cp-12.21.0 (#33826)
- fix: Initialize NetworkController completely so it can report errors to Sentry (#33607)
- fix: replace "Remind" with "remind" in deep link locale messages (#33780)
- fix: prevent swapping between native assets (#34257)
- fix: disconnect of EVM scopes when removing Solana permissions while being connected with Wallet Standard (#34281)
- fix: resume metametrics if not set yet when closing/opening app during onboarding (#34177)
- fix: handle if srp length pasted is not equal to defined srp lengths (#34183)
- fix: bridge tx detail layout fix (#33860)
- fix: Solana single-chain swap failure event not firing on src-chain (#33811)
- fix: max button was shown on native assets incorrectly causing invalid quotes (#34293)
- fix: migrate BSC network RPC from bsc-dataseed.binance.org to bsc infura (#33997)

## [12.22.3]

### Fixed

- fix: resolve infinite loading on spending cap when selected chain differs from dapp (#34355)
- fix: prevent frequent writes while the wallet UI is closed (#34413, #34465, #34506, #34473, #34474)

## [12.22.2]

### Fixed

- Fix crash on older browsers (#34255)

## [12.22.1]

### Fixed

- Display sent amounts from the active swap quote when showing approval warnings to prevent parsing non-numerical inputs (#34156)

## [12.22.0]

### Added

- New onboarding flow (#33704 and others)
- Added basic functionality banner in the carousel (#33095)
- New Multichain Accounts List Menu (#33657)
- Deep links feature (#33663 and others)
- Indicate enforced simulations are active through alternate copy and icon (#33699)
- Added trust signal indicators to the address petname component (#33670)
- Added Berachain, ApeChain and EDU Chain (#33587)
- Do not run trust signals middleware if the user has disabled security alert (#33747)
- Scan the dapp url for malicious behavior when eth_requestAccounts is called (#33627)
- Sync address book contacts (#32632)
- Hooks to enforce simulated balance changes in the future (#33531)
- Display amount of nested transaction in a batch confirmation (#33558)
- Onboard new users with Smart Account opted in by default (#33548)
- Enables Backup & Sync for all users through a migration (#33551)
- Return in wallet_getCapabilities of gasless is supported for an account (#33533)
- Added MultichainAccountTree component (#33647)
- Added support for unified UI (swapping and bridging on a singular page) (#33487)
- Added a base account details component (#33277)
- Added a selector for building new multichain accounts menu (#33606)
- Added provisional Ocap Kernel integration (#33545)
- Integrated the enabledNetworks state from the NetworkOrderController (#33478)
- Empowered the UI to display trust signals for the verifyingContract (#33573)
- Added multi-SRP EVM Account Syncing (#32951)
- Added option to hide SRP pill from account list item (#33544)
- Detect an updated Extension available and prompt for restart (#33381)
- Migration to remove permissions for deleted networks (#33484)
- Added Katana network logo (#33008)
- Bitcoin integration improvements (#33402)
- Added support for remote mode on activity list (#33157)
- Discover bitcoin accounts from SRP import (#33124)
- Prioritize Contentful slides to the start of the banner (#33271)
- Add the MultiTokenPeriod caveat to the send allowance delegation (#33155)
- Allow users to selectively enable specific networks while disabling others (#33114)
- Use the new afterAdd hook to update the transaction when remote mode is available (#33115)

### Changed

- Updated OP logo (#33399)
- Updated connection background and fixed design nits (#33100)
- Adapt the styles of the price chart loading and empty states (#33139)
- Removed snap confirmation page from Swap/Bridge page (#33778)
- Form text field margin and helptext (#33710)
- Updated the NetworkController to enable Base network by default (#33448)

### Fixed

- Update link to MetaMask CLA (#30940)
- Fixed a case where non-unique words in confirm seed phrase would break the SRP quiz (#33781)
- Display "Switch back" instead of "Switch" for smart accounts (#33724)
- Fixed `clipboardRead` permission request in Firefox (#33701)
- Set non-EVM networks to the bottom of the network list unless they are sorted by the user (#33644)
- Fixed migration 165 for the cronjob controller in the case where the previous state doesn't have an events property (#33652)
- Fixes a copy address issue (#33588)
- Fixed "Terms of Use"'s `Approve` button enablement on screens with sub-pixel scaling/scrolling (#33605)
- Remove bitcoin preferences migration (#33554)
- Allow all Bitcoin account types (#33516)
- Fixed performance and memory leak issues in the bridge amount input field and asset picker components (#33507)
- Fixed race condition in send flow validation for token balance check (#33172)
- Fixed max Solana bridge amount based on minimum balance for rent exemption v2 (#33353)
- Disabled non EVM networks on locked screen (#33481)
- Set Solana slippage to 'Auto' in the UI to match with the dynamic slippage that is set by default (#33254)
- Gracefully end sub-stream on port disconnect to prevent Premature close error (#33470)
- Fixed infinite loader in account modal due to not being able to load 7702 network information (#33472)
- Fixed migration for users who do not have tokenListController state (#33439)
- Fixed "max" option in send flow for L2 networks (#33171)
- Carousel slide improved validation for zero balance (#33243)
- Updated the UI to only display the $ symbol and amount after the token quantity has been entered (#33242)
- Fixed case of swapping from USDC on Solana via asset page (#33097)
- Open import SRP button in the existing popup instead of a new window (#33219)
- Provide fallback symbols for missing Solana images (#33206)
- Hide total fiat value when any approval simulation have "unlimited" approvals (#33168)
- Populate gas and gasPrice in requests to security alerts API and PPOMController (#33180)
- When displaying permit signature values as Unlimited, verify against the threshold after applying token decimals (#33194)
- Hide the backup srp reminders for first party snap accounts created from an imported SRP (#33047)
- Support upgrade on accounts imported from private key (#33170)
- Switch account option should not be available for hardware wallet account (#33569)
- Prompt for automated vault recovery from internal vault backup if corruption is detected (#32006)
- Improve useSnapAssetDisplay performance (#33138)

## [12.20.1]

### Changed

- This changelog was split off with 12.22.0
- All older changes can be found in [docs/CHANGELOG_older.md](https://github.com/MetaMask/metamask-extension/blob/main/docs/CHANGELOG_older.md)

[Unreleased]: https://github.com/MetaMask/metamask-extension/compare/v13.2.0...HEAD
[13.2.0]: https://github.com/MetaMask/metamask-extension/compare/v13.0.1...v13.2.0
[13.0.1]: https://github.com/MetaMask/metamask-extension/compare/v13.0.0...v13.0.1
[13.0.0]: https://github.com/MetaMask/metamask-extension/compare/v12.23.1...v13.0.0
[12.23.1]: https://github.com/MetaMask/metamask-extension/compare/v12.23.0...v12.23.1
[12.23.0]: https://github.com/MetaMask/metamask-extension/compare/v12.22.3...v12.23.0
[12.22.3]: https://github.com/MetaMask/metamask-extension/compare/v12.22.2...v12.22.3
[12.22.2]: https://github.com/MetaMask/metamask-extension/compare/v12.22.1...v12.22.2
[12.22.1]: https://github.com/MetaMask/metamask-extension/compare/v12.22.0...v12.22.1
[12.22.0]: https://github.com/MetaMask/metamask-extension/compare/v12.20.1...v12.22.0
[12.20.1]: https://github.com/MetaMask/metamask-extension/releases/tag/v12.20.1
