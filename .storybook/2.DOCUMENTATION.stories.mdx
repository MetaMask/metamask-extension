import { Meta } from '@storybook/addon-docs';

<Meta title="Getting Started / Documentation Guidelines" />

# Story Format Guidelines (CSF 3.0)

> We standardize on Storybook CSF 3.0. Keep stories minimal and deterministic. No MDX docs required for typical UI work.

## Required Format

- Use CSF 3 with typed `Meta` and `StoryObj`
- Export a `meta` object and a default export
- Export stories as objects (no `Template.bind()`)
- Use `render` only if you must compose/wrap or provide handlers
- Keep stories simple; avoid extra `parameters` unless necessary
- Name titles to mirror folder structure; avoid spaces
- Co-locate `*.stories.tsx` next to the component

## Minimal Example (CSF 3)

```tsx
import type { Meta, StoryObj } from '@storybook/react';
import { MyComponent } from './my-component';

const meta: Meta<typeof MyComponent> = {
  title: 'Components/MyComponent',
  component: MyComponent,
};
export default meta;

type Story = StoryObj<typeof meta>;

export const Default: Story = {};
```

## Example: Using Hooks in render

Keep hooks at the top-level of the `render` function component. Avoid extra `parameters` when possible.

```tsx
import type { Meta, StoryObj } from '@storybook/react';
import { useMemo } from 'react';
import { MyComponent } from './my-component';

const meta: Meta<typeof MyComponent> = {
  title: 'Components/MyComponent',
  component: MyComponent,
};
export default meta;

type Story = StoryObj<typeof meta>;

export const WithHook: Story = {
  args: { label: 'With hook' },
  render: function Render(args) {
    const computed = useMemo(() => args.label.toUpperCase(), [args.label]);
    return <MyComponent {...args} label={computed} />;
  },
};
```

## Example: With Provider and in-repo test data

Use the app's store creator and test data under `test/data/`. Do not reference `.storybook/test-data`.

```tsx
import type { Meta, StoryObj } from '@storybook/react';
import { Provider } from 'react-redux';
import configureStore from '../../ui/store/store';
import mockState from '../../test/data/mock-state.json';
import { MyConnectedComponent } from './my-connected-component';

const meta: Meta<typeof MyConnectedComponent> = {
  title: 'Components/MyConnectedComponent',
  component: MyConnectedComponent,
};
export default meta;

type Story = StoryObj<typeof meta>;

export const WithProvider: Story = {
  render: () => {
    const store = configureStore(mockState);
    return (
      <Provider store={store}>
        <MyConnectedComponent />
      </Provider>
    );
  },
};
```

## Do Not

- Do not use `Template.bind()`
- Do not write MDX docs pages unless explicitly required
- Do not add unnecessary `parameters`, providers, or side effects

## References
- CSF 3: `https://storybook.js.org/docs/writing-stories#stories-in-csf-3`
- Replace Template.bind: `https://storybook.js.org/docs/writing-stories#using-render-to-replace-template-bind`
- Storybook v9 migration: `https://storybook.js.org/docs/migrations/v9`
