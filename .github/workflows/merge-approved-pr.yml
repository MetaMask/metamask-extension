name: Merge Approved PR

on:
  # Trigger the workflow when a comment is created on an issue or pull request
  issue_comment:
    types: [created]

jobs:
  merge-pr:
    # Only run if the comment is on a PR and the comment body matches exactly "Merge my PR"
    if: >-
      github.event.issue.pull_request &&
      github.event.comment.body == 'Merge my PR' &&
      (
        github.event.comment.author_association == 'MEMBER' ||
        github.event.comment.author_association == 'OWNER'
      )
    uses: MetaMask/github-tools/.github/workflows/merge-approved-pr.yml@30baa9da0b80d94dd8bdf0b6a932c46506664857
    with:
      pr-number: ${{ github.event.issue.number }}
    secrets:
      github-token: ${{ secrets.METAMASK_EXTENSION_BRANCH_SYNC_TOKEN }}
