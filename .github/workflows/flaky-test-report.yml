name: Flaky test report

on:
  schedule:
    # Once every day from Monday-Friday at 08:00 UTC
    - cron: 0 8 * * 1-5
  workflow_dispatch:

permissions:
  contents: read
  actions: read

jobs:
  flaky-test-report:
    runs-on: ubuntu-latest
    steps:
      - name: Generate flaky test report
        uses: MetaMask/github-tools/.github/actions/flaky-test-report@v1
        with:
          repository: ${{ github.event.repository.name }}
          workflow-id: main.yml
          github-token: ${{ secrets.GITHUB_TOKEN }}
          slack-webhook-flaky-tests: ${{ secrets.SLACK_WEBHOOK_FLAKY_TESTS }}
