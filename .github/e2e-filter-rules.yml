# Filter rues for determining E2E test requirements
# Used with dorny/paths-filter action
#
# Each filter creates two outputs:
# - {filter_name}: 'true'/'false' if any changed files match any filter rules
# - {filter_name}_count: number of matching files
#
# STRATEGY: Use separate filters to detect different file types non E2E related.
# Conservative approach - add only files that safely allow skipping E2E tests.

# DOCUMENTATION FILES
documentation_files: &documentation_files
  - '**/*.{md,mdx,txt}'
  - 'docs/**/*'
  - 'test/manual-scenarios/**/*'
  - 'LICENSE'

# LOW LEVEL TEST FILES
test_files: &test_files
  - '**/*.test.{js,ts,tsx,jsx}'
  - '**/*.stories.*'
  - '**/*.snap'
  - 'test/jest/**/*'
  - 'test/unit-global/**/*'
  - 'test/helpers/**/*'
  - 'test/lib/**/*'
  - 'test/stub/**/*'
  - 'test/integration/**/*'

# CONFIG FILES
config_files: &config_files
  - '.eslint*'
  - 'eslint.config.js'
  - 'prettier.config.js'
  - 'stylelint.config.js'
  - 'tailwind.config.js'
  - 'sonar-project.properties'
  - 'codecov.yml'

# GITHUB CI/CD FILES - Files that are NOT relevant for E2E tests
github_ci_files: &github_ci_files
  - '.github/**/*'
  # - '.github/CODEOWNERS'
  # - '.github/dependabot.yml'
  # - '.github/FUNDING.yml'
  # - '.github/ISSUE_TEMPLATE/**/*'
  # - '.github/scripts/add-release-label-to-pr-and-linked-issues.ts'
  # - '.github/scripts/benchmark-stats-commit.sh'
  # - '.github/scripts/bundle-stats-commit.sh'
  # - '.github/scripts/bundle.sh'
  # - '.github/scripts/check-pr-has-required-labels.ts'
  # - '.github/scripts/check-template-and-add-labels.ts'
  # - '.github/scripts/close-release-bug-report-issue.ts'
  # - '.github/scripts/create-bug-report-issue.ts'
  # - '.github/scripts/create-lavamoat-viz.sh'
  # - '.github/scripts/get-next-semver-version.sh'
  # - '.github/scripts/identify-codeowners.ts'
  # - '.github/scripts/post-nightly-builds.ts'
  # - '.github/scripts/push-firefox-bundle-script.sh'
  # - '.github/scripts/release-create-gh-release.sh'
  # - '.github/scripts/shared/**/*'
  # - '.github/scripts/show-changelog.awk'
  # - '.github/scripts/test/**/*'
  # - '.github/scripts/validate-changelog-in-rc.sh'
  # - '.github/scripts/validate-locales-only.ts'
  # - '.github/workflows/add-release-label.yml'
  # - '.github/workflows/add-team-label.yml'
  # - '.github/workflows/auto-create-release-pr.yml'
  # - '.github/workflows/auto-update-pr-targeting-release.yml'
  # - '.github/workflows/automated-rca.yml'
  # - '.github/workflows/benchmark-pr.yml'
  # - '.github/workflows/build-storybook.yml'
  # - '.github/workflows/build-ts-migration-dashboard.yml'
  # - '.github/workflows/changelog-check.yml'
  # - '.github/workflows/check-attributions.yml'
  # - '.github/workflows/check-pr-labels.yml'
  # - '.github/workflows/check-pr-max-lines.yml'
  # - '.github/workflows/check-release-tag.yml'
  # - '.github/workflows/check-template-and-add-labels.yml'
  # - '.github/workflows/cla.yml'
  # - '.github/workflows/close-bug-report.yml'
  # - '.github/workflows/codespaces-update-badge.yml'
  # - '.github/workflows/create-bug-report.yml'
  # - '.github/workflows/create-cherry-pick-pr.yml'
  # - '.github/workflows/create-release-pr-legacy.yml'
  # - '.github/workflows/create-release-pr.yml'
  # - '.github/workflows/crowdin-action.yml'
  # - '.github/workflows/fitness-functions.yml'
  # - '.github/workflows/flaky-test-report.yml'
  # - '.github/workflows/get-release-timelines.yml'
  # - '.github/workflows/identify-codeowners.yml'
  # - '.github/workflows/locales-only.yml'
  # - '.github/workflows/nightly-build.yml'
  # - '.github/workflows/post-merge-validation.yml'
  # - '.github/workflows/publish-prerelease.yml'
  # - '.github/workflows/publish-release.yml'
  # - '.github/workflows/release-pr-approval.yml'
  # - '.github/workflows/remove-labels-after-pr-closed.yml'
  # - '.github/workflows/remove-rca-needed-label-sheets.yml'
  # - '.github/workflows/repository-health-checks.yml'
  # - '.github/workflows/run-benchmarks.yml'
  # - '.github/workflows/run-build.yml'
  # - '.github/workflows/security-code-scanner.yml'
  # - '.github/workflows/sonarcloud.yml'
  # - '.github/workflows/stable-branch-sync.yml'
  # - '.github/workflows/stale-issues-pr.yml'
  # - '.github/workflows/tag-release-branch.yml'
  # - '.github/workflows/test-lint.yml'
  # - '.github/workflows/test-storybook.yml'
  # - '.github/workflows/update-attributions.yml'
  # - '.github/workflows/update-coverage.yml'
  # - '.github/workflows/update-lavamoat-policies.yml'
  # - '.github/workflows/validate-conventional-commits.yml'
  # - '.github/workflows/validate-lavamoat-policy-build.yml'
  # - '.github/workflows/validate-lavamoat-policy-webapp.yml'

# DEVELOPMENT TOOLS
dev_tools: &dev_tools
  - 'development/fitness-functions/**/*'
  - 'development/ts-migration-dashboard/**/*'
  - 'development/generate-attributions/**/*'

# ALL FILTERED FILES - non E2E related files
non_e2e_related_files:
  - *documentation_files
  - *test_files
  - *config_files
  - *github_ci_files
  - *dev_tools

# ALL CHANGED FILES
all_changes:
  - '**'
